import{c as I}from"./element-plus.af689926.js";import{c as M}from"./_commonjs-dynamic-modules.377d74e3.js";import{_ as C}from"./index.3ad36760.js";import{o as h,c as V,I as N,a as m,J as T,U as w,F as P,a8 as k,K as R,T as G,S as L,ah as v,O as U,P as F,V as p}from"./vendor-vue.cefe3aef.js";import{i as z}from"./index.afa609c1.js";import"./element-icon.1fe9d2a8.js";import"./vendor-lib.a8c0b8df.js";var E={exports:{}};(function(t,o){(function(n,a){t.exports=a(M,o,t)})(I,function(n,a,d){var i=function(c,f,g,H,D,y){for(var q=0,A=["webkit","moz","ms","o"],x=0;x<A.length&&!window.requestAnimationFrame;++x)window.requestAnimationFrame=window[A[x]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[A[x]+"CancelAnimationFrame"]||window[A[x]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(r,s){var u=new Date().getTime(),_=Math.max(0,16-(u-q)),$=window.setTimeout(function(){r(u+_)},_);return q=u+_,$}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(r){clearTimeout(r)});var e=this;e.options={useEasing:!0,useGrouping:!0,separator:",",decimal:".",easingFn:null,formattingFn:null};for(var S in y)y.hasOwnProperty(S)&&(e.options[S]=y[S]);e.options.separator===""&&(e.options.useGrouping=!1),e.options.prefix||(e.options.prefix=""),e.options.suffix||(e.options.suffix=""),e.d=typeof c=="string"?document.getElementById(c):c,e.startVal=Number(f),e.endVal=Number(g),e.countDown=e.startVal>e.endVal,e.frameVal=e.startVal,e.decimals=Math.max(0,H||0),e.dec=Math.pow(10,e.decimals),e.duration=1e3*Number(D)||2e3,e.formatNumber=function(r){r=r.toFixed(e.decimals),r+="";var s,u,_,$;if(s=r.split("."),u=s[0],_=s.length>1?e.options.decimal+s[1]:"",$=/(\d+)(\d{3})/,e.options.useGrouping)for(;$.test(u);)u=u.replace($,"$1"+e.options.separator+"$2");return e.options.prefix+u+_+e.options.suffix},e.easeOutExpo=function(r,s,u,_){return u*(-Math.pow(2,-10*r/_)+1)*1024/1023+s},e.easingFn=e.options.easingFn?e.options.easingFn:e.easeOutExpo,e.formattingFn=e.options.formattingFn?e.options.formattingFn:e.formatNumber,e.version=function(){return"1.7.1"},e.printValue=function(r){var s=e.formattingFn(r);e.d.tagName==="INPUT"?this.d.value=s:e.d.tagName==="text"||e.d.tagName==="tspan"?this.d.textContent=s:this.d.innerHTML=s},e.count=function(r){e.startTime||(e.startTime=r),e.timestamp=r;var s=r-e.startTime;e.remaining=e.duration-s,e.options.useEasing?e.countDown?e.frameVal=e.startVal-e.easingFn(s,0,e.startVal-e.endVal,e.duration):e.frameVal=e.easingFn(s,e.startVal,e.endVal-e.startVal,e.duration):e.countDown?e.frameVal=e.startVal-(e.startVal-e.endVal)*(s/e.duration):e.frameVal=e.startVal+(e.endVal-e.startVal)*(s/e.duration),e.countDown?e.frameVal=e.frameVal<e.endVal?e.endVal:e.frameVal:e.frameVal=e.frameVal>e.endVal?e.endVal:e.frameVal,e.frameVal=Math.round(e.frameVal*e.dec)/e.dec,e.printValue(e.frameVal),s<e.duration?e.rAF=requestAnimationFrame(e.count):e.callback&&e.callback()},e.start=function(r){return e.callback=r,e.rAF=requestAnimationFrame(e.count),!1},e.pauseResume=function(){e.paused?(e.paused=!1,delete e.startTime,e.duration=e.remaining,e.startVal=e.frameVal,requestAnimationFrame(e.count)):(e.paused=!0,cancelAnimationFrame(e.rAF))},e.reset=function(){e.paused=!1,delete e.startTime,e.startVal=f,cancelAnimationFrame(e.rAF),e.printValue(e.startVal)},e.update=function(r){cancelAnimationFrame(e.rAF),e.paused=!1,delete e.startTime,e.startVal=e.frameVal,e.endVal=Number(r),e.countDown=e.startVal>e.endVal,e.rAF=requestAnimationFrame(e.count)},e.printValue(e.startVal)};return i})})(E,E.exports);const B=E.exports;const O={name:"countTo",props:{init:{type:Number,required:!1,default:0},startVal:{type:Number,required:!1,default:0},end:{type:Number,required:!0},decimals:{type:Number,required:!1,default:0},decimal:{type:String,required:!1,default:"."},duration:{type:Number,required:!1,default:2},delay:{type:Number,required:!1,default:0},uneasing:{type:Boolean,required:!1,default:!1},usegroup:{type:Boolean,required:!1,default:!1},separator:{type:String,required:!1,default:","},simplify:{type:Boolean,required:!1,default:!1},unit:{type:Array,required:!1,default(){return[[3,"K+"],[6,"M+"],[9,"B+"]]}},countClass:{type:String,required:!1,default:""},unitClass:{type:String,required:!1,default:""}},data(){return{counter:null,unitText:""}},computed:{counterId(){return`count_to_${this._uid}`}},watch:{end(t){let o=this.getValue(t);this.counter.update(o)}},mounted(){this.$nextTick(()=>{let t=this.getValue(this.end);this.counter=new B(this.counterId,this.startVal,t,this.decimals,this.duration,{useEasing:!this.uneasing,useGrouping:this.useGroup,separator:this.separator,decimal:this.decimal}),setTimeout(()=>{this.counter.error||this.counter.start()},this.delay)})},methods:{getHandleVal(t,o){return{endVal:parseInt(t/Math.pow(10,this.unit[o-1][0])),unitText:this.unit[o-1][1]}},transformValue(t){let o=this.unit.length,n={endVal:0,unitText:""};if(t<Math.pow(10,this.unit[0][0]))n.endVal=t;else for(let a=1;a<o;a++)t>=Math.pow(10,this.unit[a-1][0])&&t<Math.pow(10,this.unit[a][0])&&(n=this.getHandleVal(t,a));return t>Math.pow(10,this.unit[o-1][0])&&(n=this.getHandleVal(t,o)),n},getValue(t){let o=0;if(this.simplify){let{endVal:n,unitText:a}=this.transformValue(t);this.unitText=a,o=n}else o=t;return o}}},W={class:"count-to-wrapper"},j={class:"content-outer"},K=["id"];function Y(t,o,n,a,d,i){return h(),V("div",W,[N(t.$slots,"left",{},void 0,!0),m("p",j,[m("span",{class:T(["count-to-count-text",n.countClass]),id:i.counterId},w(n.init),11,K),m("span",{class:T(["count-to-unit-text",n.unitClass])},w(d.unitText),3)]),N(t.$slots,"right",{},void 0,!0)])}const J=C(O,[["render",Y],["__scopeId","data-v-84c2e9f0"]]),l={PRIMARY:"#409eff",SUCCESS:"#67c23a",INFO:"#909399",WARNING:"#e6a23c",DANGER:"#f56c6c"};const Z={name:"activePlate",components:{CountTo:J},props:{infoList:{type:Array,require:!0}},data(){return{COLORS:l,colors:["#409eff","#409eff","#409eff","#f56c6c","#f56c6c","#f56c6c"]}},methods:{handleClick(t){console.log(t),this.$router.push({path:t.path})}}},Q={class:"active-plate-main"},X={class:"active-list"},ee=["onClick"],te={class:"desc"};function ne(t,o,n,a,d,i){return h(),V("div",Q,[m("ul",X,[(h(!0),V(P,null,k(n.infoList,(c,f)=>(h(),V("li",{class:"item",onClick:g=>i.handleClick(c)},[m("p",{class:"num",style:R({color:c.color})},[G(w(c.count)+" ",1),L(' <CountTo :end="item.count"></CountTo> ')],4),m("p",te,w(c.title),1)],8,ee))),256))])])}const oe=C(Z,[["render",ne]]);const ae={props:{title:{type:String,default:"\u6807\u9898"},desc:{type:String,default:"\u63CF\u8FF0"}}},re={class:"card-main"},ie={class:"card-main__header"},se={class:"card-main__title"},ce={class:"card-main__desc"};function le(t,o,n,a,d,i){return h(),V("div",re,[m("div",ie,[m("div",se,w(n.title),1),m("div",ce,w(n.desc),1)]),N(t.$slots,"default")])}const b=C(ae,[["render",le]]),ue={name:"",props:{list:{type:Array,default:()=>[]}},components:{HomeCard:b,ActivePlate:oe},data(){return{}},computed:{},methods:{},created(){}};function de(t,o,n,a,d,i){const c=v("ActivePlate"),f=v("HomeCard");return h(),U(f,{desc:"System",title:"\u7CFB\u7EDF\u6570\u636E"},{default:F(()=>[p(c,{infoList:n.list},null,8,["infoList"])]),_:1})}const me=C(ue,[["render",de]]),fe=function(){return document.addEventListener?function(t,o,n){t&&o&&n&&t.addEventListener(o,n,!1)}:function(t,o,n){t&&o&&n&&t.attachEvent("on"+o,n)}}(),_e=function(){return document.removeEventListener?function(t,o,n){t&&o&&t.removeEventListener(o,n,!1)}:function(t,o,n){t&&o&&t.detachEvent("on"+o,n)}}();const pe={props:{value:Array,text:String,subtext:String},data(){return{chartDom:null}},beforeDestroy(){_e(window,"resize",this.resize)},methods:{resize(){this.chartDom&&this.chartDom.resize()},initChart(t){let o={};for(let i of t)o[i.name]=i.selected;let n=!0;t.forEach(i=>{i.value!=0&&(n=!1)});let a=t.map(i=>i.color);n==!0&&(a=["#cccccc","#cccccc"]);let d={color:a,tooltip:{trigger:"item"},legend:{top:"5%",left:"center",selectedMode:!1},series:[{type:"pie",showEmptyCircle:!0,radius:["30%","60%"],center:["50%","54%"],label:{show:!1},emphasis:{},data:t}]};this.chartDom||(this.chartDom=z(this.$refs.dom)),this.chartDom.setOption(d),t.forEach(i=>{i.selected||this.chartDom.dispatchAction({type:"legendUnSelect",name:i.name})}),fe(window,"resize",this.resize)}}},he={class:"pie-main",ref:"dom"};function Ve(t,o,n,a,d,i){return h(),V("div",he,null,512)}const ge=C(pe,[["render",Ve]]);const we={name:"Home",components:{HomeDataInfo:me,HomeCard:b,HomeChartPie:ge},props:{},data(){return{virtual_memory:{},disk_usage:{},adModal:!0,list:[],certValue:[],timer:null}},computed:{},watch:{},filters:{},methods:{async getData(){const t=await this.$http.getSystemData();this.list=t.data.map((n,a)=>(a<3?n.color=l.PRIMARY:n.count>0?n.color=l.DANGER:n.color=l.SUCCESS,n));let o={};t.data.forEach(n=>{o[n.key]=n}),console.log(o),this.handleInit(o)},handleCertData(t){let o=t.ssl_cert_count.count-t.ssl_cert_expire_count.count-t.ssl_cert_will_expire_count.count,n=[{value:o,name:"\u672A\u8FC7\u671F",color:l.SUCCESS,selected:o>0},{value:t.ssl_cert_will_expire_count.count,name:"\u5373\u5C06\u8FC7\u671F",color:l.WARNING,selected:t.ssl_cert_will_expire_count.count>0},{value:t.ssl_cert_expire_count.count,name:"\u5DF2\u8FC7\u671F",color:l.DANGER,selected:t.ssl_cert_expire_count.count>0}];this.$refs.HomeChartCertPie.initChart(n)},handleDomainData(t){let o=t.domain_count.count-t.domain_will_expire_count.count-t.domain_expire_count.count,n=[{value:o,name:"\u672A\u8FC7\u671F",color:l.SUCCESS,selected:o>0},{value:t.domain_will_expire_count.count,name:"\u5373\u5C06\u8FC7\u671F",color:l.WARNING,selected:t.domain_will_expire_count.count>0},{value:t.domain_expire_count.count,name:"\u5DF2\u8FC7\u671F",color:l.DANGER,selected:t.domain_expire_count.count>0}];this.$refs.HomeChartDomainPie.initChart(n)},handleMonitorData(t){let o=t.monitor_count.count-t.monitor_error_count.count,n=[{value:o,name:"\u6B63\u5E38",color:l.SUCCESS,selected:o>0},{value:t.monitor_error_count.count,name:"\u5F02\u5E38",color:l.DANGER,selected:t.monitor_error_count.count>0}];this.$refs.HomeChartMonitorPie.initChart(n)},handleInit(t){console.log(t),this.handleCertData(t),this.handleDomainData(t),this.handleMonitorData(t)}},beforeUnmount(){console.log("beforeUnmount"),this.timer&&(clearInterval(this.timer),this.timer=null)},mounted(){console.log("mounted"),this.timer=setInterval(()=>{this.getData()},1e3*60*1),this.getData()}},Ce={class:"app-container dashboard"},xe={class:"grid mt-md gap-[20px] grid-cols-3"};function $e(t,o,n,a,d,i){const c=v("HomeDataInfo"),f=v("HomeChartPie"),g=v("HomeCard");return h(),V("div",Ce,[p(c,{list:d.list},null,8,["list"]),m("div",xe,[p(g,{title:"\u8BC1\u4E66\u7EDF\u8BA1",desc:"SSL Cert"},{default:F(()=>[p(f,{ref:"HomeChartCertPie"},null,512)]),_:1}),p(g,{title:"\u57DF\u540D\u7EDF\u8BA1",desc:"Domain"},{default:F(()=>[p(f,{ref:"HomeChartDomainPie"},null,512)]),_:1}),p(g,{title:"\u76D1\u63A7\u7EDF\u8BA1",desc:"Monitor"},{default:F(()=>[p(f,{ref:"HomeChartMonitorPie"},null,512)]),_:1})])])}const qe=C(we,[["render",$e]]);export{qe as default};
